language: cpp
compiler:
    - gcc
before_install:
    - "sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test"
    - sudo add-apt-repository -y "deb http://archive.ubuntu.com/ubuntu trusty universe"
    - sudo add-apt-repository -y "deb http://archive.ubuntu.com/ubuntu trusty main" 
    - "sudo apt-get update -qq"
    - "sudo apt-get install -qq libboost-dev libboost-test-dev libboost-program-options-dev cmake libboost-all-dev"
    - "sudo apt-get update; sudo apt-get install gcc-4.8 g++-4.8"
    - "sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 20"
    - "sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 20"
    - "sudo update-alternatives --install /usr/bin/gcov gcov /usr/bin/gcov-4.8 50"
    - "sudo update-alternatives --config gcc"
    - "sudo update-alternatives --config g++"
    - "gcc --version"
    - sudo pip install cpp-coveralls
    
script: mkdir build && cd build && cmake ../ && make -j && ../runTests

after_success:
    - coveralls --exclude tests --exclude libs --gcov-options '\-lp'
